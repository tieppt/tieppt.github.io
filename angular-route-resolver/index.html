<!DOCTYPE html>
<html class="no-js">
  <head>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--<title>Angular Route Resolver. Nên hay không nên ?</title>-->
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Angular Route Resolver. Nên hay không nên ? | Lập Trình Thật Kỳ Diệu</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Angular Route Resolver. Nên hay không nên ?" />
<meta name="author" content="Tuan Anh" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Cùng nhau khám phá về Resolve trong Angular. Hiểu được và áp dụng vào những case thực tế của chính các bạn" />
<meta property="og:description" content="Cùng nhau khám phá về Resolve trong Angular. Hiểu được và áp dụng vào những case thực tế của chính các bạn" />
<link rel="canonical" href="https://www.tiepphan.com/angular-route-resolver/" />
<meta property="og:url" content="https://www.tiepphan.com/angular-route-resolver/" />
<meta property="og:site_name" content="Lập Trình Thật Kỳ Diệu" />
<meta property="og:image" content="https://www.tiepphan.com/assets/uploads/2020/06/angular-resolver-post.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-02T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.tiepphan.com/assets/uploads/2020/06/angular-resolver-post.png" />
<meta property="twitter:title" content="Angular Route Resolver. Nên hay không nên ?" />
<meta name="google-site-verification" content="Gcn3Y0oBud7gufI1PtszF7DFNgFOifgLRIaZAoLZWWU" />
<meta name="msvalidate.01" content="F160AE523B1846CBDC431CB91CB6613A" />
<script type="application/ld+json">
{"description":"Cùng nhau khám phá về Resolve trong Angular. Hiểu được và áp dụng vào những case thực tế của chính các bạn","url":"https://www.tiepphan.com/angular-route-resolver/","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.tiepphan.com/assets/logo.png"},"name":"Tuan Anh"},"image":"https://www.tiepphan.com/assets/uploads/2020/06/angular-resolver-post.png","headline":"Angular Route Resolver. Nên hay không nên ?","dateModified":"2020-06-02T00:00:00+00:00","datePublished":"2020-06-02T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.tiepphan.com/angular-route-resolver/"},"author":{"@type":"Person","name":"Tuan Anh"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" type="image/png" href="/favicon.ico"/>

<!-- CSS -->
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600|Roboto:100,300,400,500,700|Volkhov:400i">
<link rel="stylesheet" href="/css/owl.carousel.css" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/font-awesome.min.css" />
<link rel="stylesheet" href="/css/airspace.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/ionicons.min.css" />
<link rel="stylesheet" href="/css/animate.css" />
<link rel="stylesheet" href="/css/responsive.css" />
<link rel="stylesheet" href="/css/syntax.css" />

<!--
/*
 * Airspace
 * Ported to Jekyll by Andrew Lee
 * https://github.com/luminousrubyist/airspace-jekyll
 * Designed and Developed by ThemeFisher
 * https://themefisher.com/
 *
 */
-->


  </head>
  <body>


    <!-- Header Start -->
<header>
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <!-- header Nav Start -->
      <nav class="navbar navbar-default">
        <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.tiepphan.com">
              <img src="/assets/logo.png" alt="Logo" class="img-logo">
              <span>Lập trình thật kỳ diệu</span>
            </a>
          </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/work/">Work</a></li>
                <li><a href="/blog/">Blog</a></li>
                <li><a href="/about/">About</a></li>
                <li><a href="/contact/">Contact</a></li>
              </ul>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
    </div>
  </div>
</header><!-- header close -->



    <div class="post">
  <!-- Wrapper Start -->
  <section>
    <div class="container">
      <div class="row">
        <div class="col-md-9">
          <div class="block">
            <h1>Angular Route Resolver. Nên hay không nên ?</h1>
            <div class="post-info-wrapper">
              <p class="italic">By <span class="bold">Tuan Anh</span> on <span class="bold">June 2, 2020</span></p>
            </div>
            <hr />
            <p><h1 class="no_toc" id="angular-resolver">Angular Resolver</h1>

<p>Khi lập trình ứng dụng với Angular, chúng ta thường lấy dữ liệu từ API qua hook ngOnInit và render nó ra cho người dùng.<br />
Lúc này, trong khi đang chờ API trả về dứ liệu hoàn thành, Component của chúng ta hiện thị loading, skeleton. v.v<br />
Có một cách khác để lấy dữ liệu trước khi điều hướng tới router của bạn. Đó chính là Router Resolver</p>

<p>Trong bài này, chúng ta sẽ tìm hiểu xem Resolver là gì và cách sử dụng và áp dụng case thực tế, nên hay không nên xài như nào nhé. Let’s go.</p>

<ul class="tp__toc" id="markdown-toc">
  <li><a href="#post-intro" id="markdown-toc-post-intro">1. Giới thiệu</a></li>
  <li><a href="#create-simple-resolver" id="markdown-toc-create-simple-resolver">2. Tạo một resolver đơn giản</a></li>
  <li><a href="#if-not-use-resolver" id="markdown-toc-if-not-use-resolver">3. Nếu không xài resolver?</a></li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">4. Kết luận</a></li>
</ul>

<h2 id="post-intro">1. Giới thiệu</h2>
<p>Resolver là service được sử dụng trong Angular router để thực hiện 1 task vụ không đồng bộ trong quá trình điều hướng. Khi tác vụ không đồng bộ đó resolve data. component tương ứng với router đó sẽ được init.<br />
<img class="img-responsive" src="//media.giphy.com/media/ZeKy4eyaStg3ucsAEI/giphy.gif" alt="Video Gif" /></p>

<p>Hãy nhìn router khi bấm vào link. Tác vụ bất đồng bộ xong thì component blog detail mới được init.</p>

<p><img class="img-responsive" src="/assets/uploads/2020/06/resolver-diagram.png" alt="Resolver Flow" /></p>

<p>Đây là flow của một lần navigation sử dụng resolver.</p>

<h2 id="create-simple-resolver">2. Tạo một resolver đơn giản</h2>
<p>Một Resolver đơn giản để fetch chi tiết của một bài viết:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@angular/core</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Resolve</span><span class="p">,</span> <span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span> <span class="nx">RouterStateSnapshot</span><span class="p">,</span> <span class="nx">Router</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/router</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogItem</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../models/blog-item.model</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../services/blog.service</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">delay</span><span class="p">,</span> <span class="nx">catchError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="k">of</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
  <span class="k">export</span> <span class="kd">class</span> <span class="nx">BlogDetailResolver</span> <span class="k">implements</span> <span class="nx">Resolve</span><span class="o">&lt;</span><span class="nx">BlogItem</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="na">blogService</span><span class="p">:</span> <span class="nx">BlogService</span><span class="p">,</span> <span class="k">private</span> <span class="na">router</span><span class="p">:</span> <span class="nx">Router</span><span class="p">)</span> <span class="p">{}</span>

    <span class="nx">resolve</span><span class="p">(</span><span class="na">route</span><span class="p">:</span> <span class="nx">ActivatedRouteSnapshot</span><span class="p">,</span> <span class="na">state</span><span class="p">:</span> <span class="nx">RouterStateSnapshot</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">blogService</span><span class="p">.</span><span class="nx">getBlogDetail</span><span class="p">(</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">[</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">]).</span><span class="nx">pipe</span><span class="p">(</span>
        <span class="nx">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span>
        <span class="nx">catchError</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateByUrl</span><span class="p">(</span><span class="dl">'</span><span class="s1">/404</span><span class="dl">'</span><span class="p">);</span>
          <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">));</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>Tiếp theo, chúng ta config routing cho blog module</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/router</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogListComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./pages/blog-list/blog-list.component</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogDetailComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./pages/blog-detail/blog-detail.component</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogDetailResolveComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./pages/blog-detail-resolve/blog-detail-resolve.component</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogDetailResolver</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./resolvers/blog-detail.resolve</span><span class="dl">'</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">routes</span><span class="p">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">path</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span>
      <span class="na">component</span><span class="p">:</span> <span class="nx">BlogListComponent</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">:id</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">component</span><span class="p">:</span> <span class="nx">BlogDetailComponent</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">resolve/:id</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">component</span><span class="p">:</span> <span class="nx">BlogDetailResolveComponent</span><span class="p">,</span>
      <span class="na">resolve</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">blog</span><span class="p">:</span> <span class="nx">BlogDetailResolver</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
    <span class="na">imports</span><span class="p">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forChild</span><span class="p">(</span><span class="nx">routes</span><span class="p">)],</span>
    <span class="na">exports</span><span class="p">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">]</span>
  <span class="p">})</span>
  <span class="k">export</span> <span class="kd">class</span> <span class="nx">BlogRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<p>Và đây là component cho chi tiết bài viết:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/router</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogItem</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../models/blog-item.model</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">distinctUntilChanged</span><span class="p">,</span> <span class="nx">takeUntil</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Subject</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-blog-detail-resolve</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">templateUrl</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./blog-detail-resolve.component.html</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">./blog-detail-resolve.component.scss</span><span class="dl">'</span><span class="p">]</span>
  <span class="p">})</span>
  <span class="k">export</span> <span class="kd">class</span> <span class="nx">BlogDetailResolveComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">{</span>
    <span class="nl">blog</span><span class="p">:</span> <span class="nx">BlogItem</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">onDestroy$</span><span class="p">:</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="k">readonly</span> <span class="nx">route</span><span class="p">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Go here</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
        <span class="nx">takeUntil</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onDestroy$</span><span class="p">),</span>
        <span class="nx">distinctUntilChanged</span><span class="p">()</span>
      <span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">blog</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">blog</span><span class="p">;</span>
      <span class="p">})</span>
    <span class="p">}</span>

    <span class="nx">ngOnDestroy</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">onDestroy$</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">onDestroy$</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

</code></pre></div></div>

<p>Đây là component khi resolve xong. Hãy để ý tới <code class="language-plaintext highlighter-rouge">console.log("Go here")</code> ở trong ngOnInit nhé.<br />
Và đây là kết quả:<br />
<img class="img-responsive" src="//media.giphy.com/media/QtvNKPx7Ogucu7fdMS/giphy.gif" alt="Video Console" /></p>

<p>Khi mình bấm vào title của post để vào router detail. phải chờ resolver xong thì component mới init.<br />
Bây giờ hãy tưởng tượng một HTTP  request response data trong 5 giây. Sau khi nhấp vào một liên kết trong ứng dụng, HTTP request bắt đầu. Việc định tuyến sẽ không được hoàn thành trước khi HTTP request đó response dữ liệu. Do đó, nếu HTTP mất 5 giây, thì cũng sẽ mất 5 giây để quá trình định tuyến hoàn tất.</p>

<p>Vậy là các bạn đã hiểu về resolver rồi chứ ??</p>

<h2 id="if-not-use-resolver">3. Nếu không xài resolver?</h2>

<p>Ôi vậy còn cách như bình thường hay xài (Fetch dữ liệu chi tiết của bài viết trong hook ngOnInit trong component mà không xài resolver) thì sao nhỉ? 
Lúc này. Điều hướng sẽ chạy ngay qua trang chi tiết blog mà không gặp bất cử trở ngại nào. Thêm nữa, component của chúng ta nên thêm loading indicator, skeleton loading, etc cho mục đích trải nghiệm người dùng.</p>

<p>Đây là component mình không xài resolver. Mình thêm loading để user biết và chờ load dữ liệu xong.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../services/blog.service</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="nx">Subject</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">BlogItem</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../../models/blog-item.model</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/router</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">takeUntil</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">rxjs/operators</span><span class="dl">'</span><span class="p">;</span>

  <span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
    <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app-blog-detail</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">templateUrl</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./blog-detail.component.html</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">./blog-detail.component.scss</span><span class="dl">'</span><span class="p">]</span>
  <span class="p">})</span>
  <span class="k">export</span> <span class="kd">class</span> <span class="nx">BlogDetailComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">{</span>
    <span class="nx">blog$</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">BlogItem</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="k">private</span> <span class="nx">onDestroy$</span><span class="p">:</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Subject</span><span class="o">&lt;</span><span class="nx">boolean</span><span class="o">&gt;</span><span class="p">();</span>

    <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="k">readonly</span> <span class="nx">blogService</span><span class="p">:</span> <span class="nx">BlogService</span><span class="p">,</span> <span class="k">private</span> <span class="k">readonly</span> <span class="nx">route</span><span class="p">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">takeUntil</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">onDestroy$</span><span class="p">)).</span><span class="nx">subscribe</span><span class="p">((</span><span class="na">params</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">id</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">blog$</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">blogService</span><span class="p">.</span><span class="nx">getBlogDetail</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">ngOnDestroy</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">onDestroy$</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">onDestroy$</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

</code></pre></div></div>
<p>Và kết quả là: Mình đợi get dữ liệu từ API xong rồi hiển thị ra cho người dùng. Để cho họ biết là mình đang lấy dữ liệu lên, mình sẽ hiển thị một dòng text <code class="language-plaintext highlighter-rouge">Loading....</code><br />
Không nên để trang trắng nhé. Người dùng cữ ngỡ là trang này đang bị lỗi mà không hề hay biết mình đang get dữ liệu ở dưới.</p>

<p><img class="img-responsive" src="//media.giphy.com/media/S3tsS08K8ub0TkTIed/giphy.gif" alt="Video No Resolver" /></p>

<p>Flow khi không có Resolver:<br />
<img class="img-responsive" src="/assets/uploads/2020/06/no-resolver-diagram.png" alt="Resolver Flow" /></p>

<p>Đấy. Độ trễ khi navigation gần như không có. Trải nghiệm người dùng tốt hơn nhiều so với đợi 1 khoảng thời gian rồi mới navigation (tưởng bị lỗi chứ :3)</p>

<h2 id="conclusion">4. Kết luận</h2>

<p>Vậy là các bạn đã hiểu <code class="language-plaintext highlighter-rouge">Resolver</code> rồi chứ ?<br />
Một trang SPA theo mình nghĩ là nên luôn luôn phải react fast và dữ liệu nên tải không đồng bộ khi chạy. Nên các bạn cân nhắc kỹ trước khi xài <code class="language-plaintext highlighter-rouge">Resolver</code> nhé.</p>

<p>Bản thân mình không phải fan của Resolver và cũng không xài Resolver trong các dự án của mình. Mình viết lên đây nhằm mục đích chia sẻ kiến thức và được học hỏi, nhận những comment góp ý của mọi người. Xin cảm ơn.</p>

<p>Đây là github repo cho bài viết này nhé. Các bạn có thể clone về và trải nghiệm. -&gt; <a href="https://github.com/tuananhitoct/angular-resolver">Resolver Angular</a></p>

<p>Link tham khảo:<br />
    + <a href="https://angular.io/api/router/Resolve">https://angular.io/api/router/Resolve</a><br />
    + <a href="https://www.digitalocean.com/community/tutorials/angular-route-resolvers">https://www.digitalocean.com/community/tutorials/angular-route-resolvers</a><br />
    + <a href="https://codeburst.io/understanding-resolvers-in-angular-736e9db71267">https://codeburst.io/understanding-resolvers-in-angular-736e9db71267</a><br />
    + <a href="https://dzone.com/articles/understanding-angular-route-resolvers-by-example">https://dzone.com/articles/understanding-angular-route-resolvers-by-example</a></p>
</p>
          </div>
        </div>
        <div class="col-md-3">
          <h2>Facebook</h2>
          <div class="fb-page" data-href="https://www.facebook.com/LapTrinhThatKyDieu/" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/LapTrinhThatKyDieu/" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/LapTrinhThatKyDieu/">Lập Trình Thật Kỳ Diệu</a></blockquote></div>
        </div>
      </div>
    </div>
  </section>
</div>
<p class="center-text" style="padding: 30px;">
  <a href="/blog">Back to blog</a>
</p>











    <!-- footer Start -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="footer-manu">
          <ul>
            <li><a href="/about/">About</a></li>
            <li><a href="/contact/">Contact</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="#">Terms</a></li>
          </ul>
        </div>
        <p>Copyright &copy; 2017 to present - tiepphan.com All rights reserved.</p>
      </div>
    </div>
  </div>
</footer>

<!-- Js -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-3.2.1.min.js"><\/script>')</script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/plugins.js"></script>

<script src="/js/main.js"></script>

    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    </body>
</html>
